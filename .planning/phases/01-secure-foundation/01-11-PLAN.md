---
phase: 01-secure-foundation
plan: 11
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - tailwind.config.js
  - src/components/BotCard.tsx
  - src/components/ProfileView.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Base font size is 14-16px (not 10px)"
    - "All text meets WCAG AA contrast ratio (4.5:1 minimum)"
    - "Component text sizes are 12-16px minimum (no 8-9px text)"
    - "Typography has clear hierarchy and is readable on all screen sizes"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Updated base typography styles"
      contains: "font-size: 16px"
    - path: "tailwind.config.js"
      provides: "Custom font size scale"
      contains: "fontSize extension"
    - path: "src/components/BotCard.tsx"
      provides: "Redesigned card with readable text"
      min_lines: 150
    - path: "src/components/ProfileView.tsx"
      provides: "Profile view with accessible text"
      min_lines: 200
  key_links:
    - from: "tailwind.config.js"
      to: "all components"
      via: "fontSize scale classes"
---

<objective>
Fix Gap 6: Text Readability and Accessibility Issues

Purpose: The current UI has 10px base font size and widespread 8-10px text throughout components, failing WCAG AA contrast requirements. This gap closure implements proper typography scale with accessible contrast ratios.

Output: Updated CSS with 14-16px base font, WCAG AA compliant contrast, and component text sizes scaled to 12-16px minimum.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/01-secure-foundation/01-secure-foundation-UAT.md

## Gap 6 Details (from UAT.md Test 13)
- **Truth**: "Homepage and profile pages adapt to different screen sizes - cards stack on mobile, expand on desktop, text remains readable"
- **Status**: Failed
- **Severity**: major
- **User reported**: "Flex is correct but Text is too small and is not readable accessible"
- **Root cause**: "Multiple typography problems: (1) Base font size is only 10px, (2) Widespread use of 8-10px inline text throughout components, (3) No responsive typography scaling, (4) WCAG AA contrast failure - #71717a on #d1d5db is only 3.28:1"
- **Artifacts**:
  - path: "src/app/globals.css:40" - Base font-size: 10px
  - path: "src/components/BotCard.tsx" - Multiple text-[9px] and text-[8px] classes
  - path: "src/app/discover/page.tsx" - Multiple text-[9px] and text-[10px] for labels/inputs
  - path: "tailwind.config.js" - No custom fontSize extension or responsive typography scale
- **Missing**:
  - Base font size increase to 14-16px
  - Proper typography scale with responsive sizing
  - WCAG AA compliant contrast ratios (4.5:1 minimum)
  - Component text sizes scaled up from 8-10px to 12-16px
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update base font size and typography scale</name>
  <files>src/app/globals.css</files>
  <action>
    Update src/app/globals.css with accessible typography:
    
    1. **Change base font size** (around line 40):
    ```css
    /* OLD: Base font size 10px makes everything too small */
    /* font-size: 10px; */
    
    /* NEW: Accessible 16px base */
    html {
      font-size: 16px;
    }
    
    body {
      font-size: 1rem; /* 16px */
      line-height: 1.6;
    }
    ```
    
    2. **Add typography utility classes**:
    ```css
    /* Accessible text sizes - minimum 12px for UI elements */
    .text-label {
      font-size: 0.75rem; /* 12px */
      line-height: 1.4;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .text-caption {
      font-size: 0.8125rem; /* 13px */
      line-height: 1.5;
    }
    
    .text-body-sm {
      font-size: 0.875rem; /* 14px */
      line-height: 1.6;
    }
    
    .text-body {
      font-size: 1rem; /* 16px */
      line-height: 1.6;
    }
    
    .text-heading-sm {
      font-size: 1.125rem; /* 18px */
      line-height: 1.4;
      font-weight: 600;
    }
    
    .text-heading {
      font-size: 1.25rem; /* 20px */
      line-height: 1.3;
      font-weight: 700;
    }
    ```
    
    3. **Ensure minimum contrast ratios** (update CSS variables if needed):
    ```css
    :root {
      /* Ensure these meet WCAG AA (4.5:1 on backgrounds) */
      --color-text-primary: #18181b;   /* zinc-900 on cream */
      --color-text-secondary: #52525b; /* zinc-600 on cream ~7:1 */
      --color-text-muted: #71717a;     /* zinc-500 on cream ~4.6:1 */
      
      /* Background colors */
      --color-bg-primary: #fefce8;     /* cream-50 */
      --color-bg-secondary: #fef9c3;   /* cream-100 */
      --color-bg-tertiary: #fef08a;    /* cream-200 */
    }
    ```
  </action>
  <verify>grep -q "font-size: 16px" src/app/globals.css && grep -q "text-label" src/app/globals.css</verify>
  <done>Base font size updated to 16px with accessible typography scale</done>
</task>

<task type="auto">
  <name>Task 2: Extend Tailwind config with custom font sizes</name>
  <files>tailwind.config.js</files>
  <action>
    Update tailwind.config.js to include proper font size scale:
    
    1. **Add fontSize extension to theme**:
    ```javascript
    module.exports = {
      // ... existing config
      theme: {
        extend: {
          // ... existing extensions
          fontSize: {
            '2xs': ['0.625rem', { lineHeight: '1.4' }],   /* 10px - absolute minimum */
            'xs': ['0.75rem', { lineHeight: '1.4' }],     /* 12px - labels, badges */
            'sm': ['0.875rem', { lineHeight: '1.5' }],    /* 14px - small body text */
            'base': ['1rem', { lineHeight: '1.6' }],      /* 16px - body text */
            'lg': ['1.125rem', { lineHeight: '1.5' }],    /* 18px - emphasis */
            'xl': ['1.25rem', { lineHeight: '1.4' }],     /* 20px - headings */
            '2xl': ['1.5rem', { lineHeight: '1.3' }],     /* 24px - section titles */
            '3xl': ['1.875rem', { lineHeight: '1.2' }],   /* 30px - page titles */
          },
        },
      },
    };
    ```
    
    2. **Add responsive font size variants** (optional but recommended):
    ```javascript
    // For responsive scaling
    fontSize: {
      // ... sizes above
      'responsive-sm': ['clamp(0.875rem, 1vw + 0.5rem, 1rem)', { lineHeight: '1.5' }],
      'responsive-base': ['clamp(1rem, 1vw + 0.75rem, 1.125rem)', { lineHeight: '1.6' }],
      'responsive-lg': ['clamp(1.125rem, 1.5vw + 0.5rem, 1.25rem)', { lineHeight: '1.4' }],
    }
    ```
    
    3. **Ensure plugins and other config remain intact**
  </action>
  <verify>grep -q "fontSize:" tailwind.config.js && grep -q "'2xs'" tailwind.config.js</verify>
  <done>Tailwind config extended with accessible font size scale</done>
</task>

<task type="auto">
  <name>Task 3: Update BotCard with readable typography</name>
  <files>src/components/BotCard.tsx</files>
  <action>
    Update BotCard.tsx to use new typography scale (building on 01-09 changes):
    
    1. **Replace all text-[9px] and text-[8px] with proper sizes**:
    ```typescript
    // OLD:
    // <span className="text-[9px] uppercase">BOT_NAME</span>
    
    // NEW:
    <span className="text-xs uppercase tracking-wider text-text-secondary">BOT_NAME</span>
    ```
    
    2. **Update specific elements**:
    - Labels (BOT_NAME, LLM, etc.): text-xs (12px) instead of text-[9px]
    - Bot name: text-lg (20px) or text-base (16px) with font-bold
    - Description: text-sm (14px) instead of text-[10px]
    - Item badges: text-xs (12px) instead of text-[9px]
    - Stats/numbers: text-sm (14px)
    
    3. **Ensure minimum text sizes**:
    - Nothing smaller than text-xs (12px) for UI elements
    - Body text minimum text-sm (14px)
    - Headings text-base (16px) or larger
    
    4. **Update color contrast**:
    - Use text-text-primary (#18181b) for primary text
    - Use text-text-secondary (#52525b) for secondary text
    - Avoid text-text-muted on small text
    
    5. **Search and replace pattern**:
    ```bash
    # Find all tiny text classes
    grep -n "text-\[8px\]\|text-\[9px\]\|text-\[10px\]" src/components/BotCard.tsx
    
    # Replace with:
    # text-[8px] -> text-xs (or remove if too small)
    # text-[9px] -> text-xs
    # text-[10px] -> text-xs or text-sm
    ```
  </action>
  <verify>! grep -q "text-\[8px\]\|text-\[9px\]" src/components/BotCard.tsx</verify>
  <done>BotCard uses accessible text sizes (minimum 12px) and proper contrast</done>
</task>

<task type="auto">
  <name>Task 4: Update ProfileView and other components</name>
  <files>src/components/ProfileView.tsx, src/app/discover/page.tsx, src/components/FeaturedBotsSection.tsx</files>
  <action>
    Apply typography fixes to all other components with tiny text:
    
    1. **ProfileView.tsx**:
    - Find and replace text-[9px], text-[10px] with text-xs or text-sm
    - Ensure bot name is prominent (text-2xl or text-3xl)
    - Description should be text-base (16px)
    - Labels should be text-xs (12px) minimum
    
    2. **discover/page.tsx**:
    - Update search input placeholder and labels
    - Filter tags should be text-sm
    - Section headers text-xl
    
    3. **FeaturedBotsSection.tsx**:
    - Section title: text-2xl or text-3xl
    - Subtitle: text-base
    - Card text already handled in BotCard update
    
    4. **Search for all tiny text across components**:
    ```bash
    grep -r "text-\[8px\]\|text-\[9px\]" src/components/ src/app/
    ```
    
    5. **Systematic replacement**:
    - text-[8px] -> text-xs (review if too small, may need design change)
    - text-[9px] -> text-xs
    - text-[10px] -> text-xs
    - text-[11px] -> text-sm
    
    6. **Update color usage**:
    - Replace hardcoded colors with CSS variables
    - Ensure minimum 4.5:1 contrast ratio
  </action>
  <verify>! grep -r "text-\[8px\]\|text-\[9px\]" src/components/ src/app/ --include="*.tsx" --include="*.ts"</verify>
  <done>All components use accessible text sizes (12px minimum) and proper contrast</done>
</task>

<task type="auto">
  <name>Task 5: Verify WCAG AA contrast compliance</name>
  <files>src/app/globals.css</files>
  <action>
    Verify and document color contrast ratios:
    
    1. **Document current contrast ratios** in a comment:
    ```css
    /* WCAG AA Contrast Compliance
     * 
     * Background: #fefce8 (cream-50)
     * - text-primary #18181b: 16.5:1 ✓ (AAA)
     * - text-secondary #52525b: 7.2:1 ✓ (AAA)
     * - text-muted #71717a: 4.6:1 ✓ (AA)
     * 
     * Background: #d1d5db (zinc-300) - used in some components
     * - text-primary #18181b: 8.9:1 ✓ (AAA)
     * - text-secondary #52525b: 4.0:1 ✗ (fails AA, use #3f3f46 = 4.6:1)
     */
    ```
    
    2. **Fix any failing contrast combinations**:
    - If using text-muted (#71717a) on gray backgrounds, switch to text-secondary
    - If using white text on cream, ensure sufficient contrast
    
    3. **Add contrast checking to your workflow** (optional):
    - Consider adding a contrast checker script
    - Or use browser DevTools accessibility panel
    
    4. **Test key combinations**:
    - Primary text on cream background
    - Secondary text on cream background
    - Labels on card backgrounds
    - Button text on button backgrounds
  </action>
  <verify>grep -q "WCAG AA Contrast" src/app/globals.css</verify>
  <done>Color contrast documented and verified for WCAG AA compliance</done>
</task>

</tasks>

<verification>
**Gap 6 Closure Verification:**

1. **Base font size**: Check dev tools, html element should show 16px
2. **No tiny text**: Search for text-[8px], text-[9px] - should return no results
3. **Minimum sizes**: All UI text should be minimum 12px (text-xs)
4. **Contrast check**: Use browser DevTools accessibility panel to verify 4.5:1 minimum
5. **Visual check**: Text should be readable without zooming on standard displays
6. **Responsive check**: Text scales appropriately on mobile (no overflow issues)
</verification>

<success_criteria>
- [ ] Base font size is 16px in globals.css
- [ ] No text-[8px] or text-[9px] classes anywhere in codebase
- [ ] Tailwind config has custom fontSize scale with 12px minimum
- [ ] BotCard uses text-xs (12px) minimum for all text
- [ ] ProfileView uses accessible text sizes
- [ ] All components meet WCAG AA contrast (4.5:1 minimum)
- [ ] Visual inspection confirms text is readable
</success_criteria>

<output>
After completion, create `.planning/phases/01-secure-foundation/01-11-SUMMARY.md`
</output>
